(t=>{t(document).on("click","#generate_api_keys",function(){var e=t(this).data("nonce");t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"turbosmtp_generate_api_keys",turbosmtp_nonce:e},beforeSend:function(){t("#generate_api_keys").prop("disabled",!0).text("Generating...")},success:function(e){e.success?location.href=e.data.next_url:alert("Error: "+(e.message||"Unknown error"))},error:function(e,t,a){alert("AJAX Error: "+a)},complete:function(){t("#generate_api_keys").prop("disabled",!1).text("Generate API Key")}})}),t(document).on("click",".copy-button",function(){var e=t(this).data("target");t("#"+e).select(),document.execCommand("copy"),t("#message_"+e).text("Copied!").fadeIn().delay(2e3).fadeOut()});var e=t("#send_method"),a=t("#smtp_settings");function n(){"api"===e.val()?a.hide():a.show()}e.on("change",n),n(),t("#send-test-email").click(function(){t.ajax({url:ajaxurl,type:"POST",data:{action:"turbosmtp_send_test_email",to:t("#ts_mail_to").val(),turbosmtp_send_test_email_nonce:t("#turbosmtp_send_test_email_nonce").val()},beforeSend:function(){t("#send-test-email").attr("disabled",!0),t("#turbosmtp-email-result").html("Invio in corso...")},success:function(e){e.success?t("#turbosmtp-email-result").html('<span style="color: green;">'+e.data.message+"</span>"):t("#turbosmtp-email-result").html('<span style="color: red;">Errore: '+e.data.message+"<br>"+(e.data.error||"")+"</span>"),t("#send-test-email").attr("disabled",!1)},error:function(){t("#turbosmtp-email-result").html('<span style="color: red;">Errore di connessione AJAX</span>'),t("#send-test-email").attr("disabled",!1)}})})})(jQuery);