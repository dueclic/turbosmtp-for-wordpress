(t=>{t(document).on("click","#generate_api_keys",function(){var e=t(this).data("nonce");t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"turbosmtp_generate_api_keys",turbosmtp_nonce:e},beforeSend:function(){t("#generate_api_keys").prop("disabled",!0).text(ts.i18n.api_key_generate_loading)},success:function(e){e.success?location.href=e.data.redirect_url:alert("Error: "+(e.message||ts.i18n.api_key_generate_unknown_error))},error:function(e,t,n){alert("AJAX Error: "+n)},complete:function(){t("#generate_api_keys").prop("disabled",!1).text(ts.i18n.api_key_generate_button)}})}),t(document).on("click",".copy-button",function(){var e=t(this).data("target");t("#"+e).select(),document.execCommand("copy"),t("#message_"+e).text(ts.i18n.api_key_copied_text).fadeIn().delay(2e3).fadeOut()});var e=t("#send_method"),n=t("#smtp_settings");function s(){"api"===e.val()?n.hide():n.show()}e.on("change",s),s(),t(document).on("click","#turbosmtp_send_test_email",function(){t.ajax({url:ajaxurl,type:"POST",data:{action:"turbosmtp_send_test_email",to:t("#ts_mail_to").val(),turbosmtp_send_test_email_nonce:t("#turbosmtp_send_test_email_nonce").val()},beforeSend:function(){t("#turbosmtp_send_test_email").prop("disabled",!0),t("#turbosmtp-email-result").html(ts.i18n.test_email_send_loading)},success:function(e){e.success?t("#turbosmtp-email-result").html('<span style="color: green;">'+e.data.message+"</span>"):t("#turbosmtp-email-result").html('<span style="color: red;">'+e.data.message+"<br>"+(e.data.error||"")+"</span>"),t("#turbosmtp_send_test_email").attr("disabled",!1)},error:function(){t("#turbosmtp-email-result").html('<span style="color: red;">'+ts.i18n.connection_request_error+"</span>"),t("#turbosmtp_send_test_email").prop("disabled",!1)}})}),t(document).on("click","#turbosmtp_disconnect",function(e){e.preventDefault(),confirm(ts.i18n.disconnect_confirm)&&t.ajax({url:t(this).data("action"),type:"POST",data:{},beforeSend:function(){t("#turbosmtp_send_test_email").prop("disabled",!0),t("#turbosmtp-email-result").html(ts.i18n.test_email_send_loading)},success:function(e){e.success&&(location.href=e.data.redirect_url)},error:function(){alert(ts.i18n.connection_request_error)}})})})(jQuery);